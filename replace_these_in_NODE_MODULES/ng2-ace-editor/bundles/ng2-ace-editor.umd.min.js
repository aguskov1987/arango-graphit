!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("brace"),require("brace/theme/monokai"),require("brace/mode/html"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","brace","brace/theme/monokai","brace/mode/html","@angular/forms"],e):e((t.ng=t.ng||{},t.ng.ng2aceeditor={}),t.ng.core,null,null,null,t.ng.forms)}(this,function(t,i,e,o,n,r){"use strict";var s=function(){function t(t,e){var o=this;this.zone=e,this.textChanged=new i.EventEmitter,this.textChange=new i.EventEmitter,this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="";var n=t.nativeElement;this.zone.runOutsideAngular(function(){o.editor=ace.edit(n)}),this.editor.$blockScrolling=1/0}return t.prototype.ngOnInit=function(){this.init(),this.initEvents()},t.prototype.ngOnDestroy=function(){this.editor.destroy()},t.prototype.init=function(){this.editor.setOptions(this._options||{}),this.editor.setTheme("ace/theme/"+this._theme),this.setMode(this._mode),this.editor.setReadOnly(this._readOnly)},t.prototype.initEvents=function(){var t=this;this.editor.on("change",function(){return t.updateText()}),this.editor.on("paste",function(){return t.updateText()})},t.prototype.updateText=function(){var t=this,e=this.editor.getValue();e!==this.oldText&&(this._durationBeforeCallback?(null!=this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){t._text=e,t.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),t.timeoutSaving=null},this._durationBeforeCallback)):(this._text=e,this.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)})),this.oldText=e)},Object.defineProperty(t.prototype,"options",{set:function(t){this._options=t,this.editor.setOptions(t||{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{set:function(t){this._readOnly=t,this.editor.setReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{set:function(t){this._theme=t,this.editor.setTheme("ace/theme/"+t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),t.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this.editor.getSession().setMode(this._mode):this.editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.setText=function(t){this._text!==t&&(null==t&&(t=""),!0===this._autoUpdateContent&&(this._text=t,this.editor.setValue(t),this.editor.clearSelection()))},Object.defineProperty(t.prototype,"autoUpdateContent",{set:function(t){this._autoUpdateContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},Object.defineProperty(t.prototype,"aceEditor",{get:function(){return this.editor},enumerable:!0,configurable:!0}),t.decorators=[{type:i.Directive,args:[{selector:"[ace-editor]"}]}],t.ctorParameters=function(){return[{type:i.ElementRef},{type:i.NgZone}]},t.propDecorators={textChanged:[{type:i.Output}],textChange:[{type:i.Output}],options:[{type:i.Input}],readOnly:[{type:i.Input}],theme:[{type:i.Input}],mode:[{type:i.Input}],text:[{type:i.Input}],autoUpdateContent:[{type:i.Input}],durationBeforeCallback:[{type:i.Input}]},t}(),u=function(){function t(t,e){var o=this;this.zone=e,this.textChanged=new i.EventEmitter,this.textChange=new i.EventEmitter,this.style={},this._options={},this._readOnly=!1,this._theme="monokai",this._mode="html",this._autoUpdateContent=!0,this._durationBeforeCallback=0,this._text="",this._onChange=function(t){},this._onTouched=function(){};var n=t.nativeElement;this.zone.runOutsideAngular(function(){o._editor=ace.edit(n)}),this._editor.$blockScrolling=1/0}return t.prototype.ngOnInit=function(){this.init(),this.initEvents()},t.prototype.ngOnDestroy=function(){this._editor.destroy()},t.prototype.init=function(){this.setOptions(this._options||{}),this.setTheme(this._theme),this.setMode(this._mode),this.setReadOnly(this._readOnly)},t.prototype.initEvents=function(){var t=this;this._editor.on("change",function(){return t.updateText()}),this._editor.on("paste",function(){return t.updateText()})},t.prototype.updateText=function(){var t=this,e=this._editor.getValue();e!==this.oldText&&(this._durationBeforeCallback?(this.timeoutSaving&&clearTimeout(this.timeoutSaving),this.timeoutSaving=setTimeout(function(){t._text=e,t.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),t.timeoutSaving=null},this._durationBeforeCallback)):(this._text=e,this.zone.run(function(){t.textChange.emit(e),t.textChanged.emit(e)}),this._onChange(e)),this.oldText=e)},Object.defineProperty(t.prototype,"options",{set:function(t){this.setOptions(t)},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this._options=t,this._editor.setOptions(t||{})},Object.defineProperty(t.prototype,"readOnly",{set:function(t){this.setReadOnly(t)},enumerable:!0,configurable:!0}),t.prototype.setReadOnly=function(t){this._readOnly=t,this._editor.setReadOnly(t)},Object.defineProperty(t.prototype,"theme",{set:function(t){this.setTheme(t)},enumerable:!0,configurable:!0}),t.prototype.setTheme=function(t){this._theme=t,this._editor.setTheme("ace/theme/"+t)},Object.defineProperty(t.prototype,"mode",{set:function(t){this.setMode(t)},enumerable:!0,configurable:!0}),t.prototype.setMode=function(t){this._mode=t,"object"==typeof this._mode?this._editor.getSession().setMode(this._mode):this._editor.getSession().setMode("ace/mode/"+this._mode)},Object.defineProperty(t.prototype,"value",{get:function(){return this.text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.setText(t)},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),t.prototype.setText=function(t){null==t&&(t=""),this._text!==t&&!0===this._autoUpdateContent&&(this._text=t,this._editor.setValue(t),this._onChange(t),this._editor.clearSelection())},Object.defineProperty(t.prototype,"autoUpdateContent",{set:function(t){this.setAutoUpdateContent(t)},enumerable:!0,configurable:!0}),t.prototype.setAutoUpdateContent=function(t){this._autoUpdateContent=t},Object.defineProperty(t.prototype,"durationBeforeCallback",{set:function(t){this.setDurationBeforeCallback(t)},enumerable:!0,configurable:!0}),t.prototype.setDurationBeforeCallback=function(t){this._durationBeforeCallback=t},t.prototype.getEditor=function(){return this._editor},t.decorators=[{type:i.Component,args:[{selector:"ace-editor",template:"",styles:[":host { display:block;width:100%; }"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return t}),multi:!0}]}]}],t.ctorParameters=function(){return[{type:i.ElementRef},{type:i.NgZone}]},t.propDecorators={textChanged:[{type:i.Output}],textChange:[{type:i.Output}],style:[{type:i.Input}],options:[{type:i.Input}],readOnly:[{type:i.Input}],theme:[{type:i.Input}],mode:[{type:i.Input}],value:[{type:i.Input}],text:[{type:i.Input}],autoUpdateContent:[{type:i.Input}],durationBeforeCallback:[{type:i.Input}]},t}(),a=[u,s],p=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{declarations:a.slice(),imports:[],providers:[],exports:a}]}],t}();t.AceEditorDirective=s,t.AceEditorComponent=u,t.AceEditorModule=p,Object.defineProperty(t,"__esModule",{value:!0})});